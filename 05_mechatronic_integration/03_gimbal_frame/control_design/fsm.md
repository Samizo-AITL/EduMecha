# FSM設計 - Gimbal制御対象用ステートマシン定義

## 概要
このFSM（有限状態機械）は、2軸ジンバル制御において、状態管理を行うための制御構造です。  
主に「センサトリガ → 姿勢制御 → 異常監視 → 待機復帰」の4つの基本的な遷移を管理します。

## 状態一覧（States）

| ID     | 説明                     |
|--------|--------------------------|
| `idle` | センサ入力待ちの初期状態   |
| `move` | PID制御による移動制御中    |
| `error`| 異常検出時の安全待機状態   |

## 状態遷移（Transitions）

| 遷移元 | 遷移先 | 条件（Condition）        |
|--------|--------|--------------------------|
| `idle` | `move` | センサがトリガ（sensor_triggered）|
| `move` | `error`| 過負荷が検出（overload）       |
| `error`| `idle` | リセット指令（reset）          |

## FSM構成図（テキスト版）

 +-------+       sensor_triggered     +-------+
 | idle  | -------------------------> | move  |
 +-------+                            +-------+
                                       |
                                       | overload
                                       v
                                   +--------+
                                   | error  |
                                   +--------+
                                       |
                                       | reset
                                       v
                                   +--------+
                                   | idle   |
                                   +--------+

## 実装ファイル
- `fsm.yaml`：このFSM構造のYAML定義ファイル

## 制御連携
- FSMはPID制御モジュールを起動／停止するトリガとなります。
- LLM（ChatGPT）からの指令によって `reset` を含む入力を受け取ることも可能です。

---

## 今後の展開案
- `move` → `fine_adjust`（微調整）状態の追加で柔軟性向上
- `error` 状態でLLMから状況報告生成支援（診断対話）

---

著作：三溝真一（Samizo-AITL）  
ライセンス：MIT（教育・制御PoC目的での再利用を歓迎）
