# LLM連携プロンプト集 - Gimbal制御 × ChatGPT支援

## 概要
このファイルは、FSM・PID制御と連携し、ChatGPTによる「指令生成」「異常診断」「応答評価」などを行うためのプロンプトテンプレート集です。

AITL-Hの「知性層（LLM）」として機能し、制御ログの解釈・改善提案・設計判断の補助を行います。

---

## 📌 使用方法

- ChatGPTなどのLLMに以下のプロンプトを入力し、制御支援を得る
- 実行環境やログ内容に応じて変数（{…}）部分を適宜変更
- ZennやObsidianでも埋め込み可能

---

## 🔹 状態遷移ログの解釈

```plaintext
以下はジンバル制御のFSM状態ログです。異常の原因と考えられる状態遷移パターンを指摘してください。

【FSMログ】
idle → move → move → error → idle → move

FSM定義は以下のとおりです：
- idle → move：sensor_triggered
- move → error：overload
- error → idle：reset

【出力形式】
- 異常遷移のポイント
- 想定される原因（センサ、姿勢、外乱など）
- 改善のための制御方針
```

---

## 🔹 PID応答ログの分析
```
以下のPIDログに基づき、応答の安定性について診断し、Kp, Ki, Kd の調整方針を提案してください。

【IMUログ（Pitch軸）】
目標：0.0 [deg]
時刻と角度：
t=0s → 0.0
t=0.2s → +2.4
t=0.4s → -1.1
t=0.6s → +0.6
t=0.8s → -0.2
t=1.0s → +0.05

【診断フォーマット】
- オーバーシュート／振動の有無
- 現状の制御品質（良好／不安定）
- PID再調整案（Kp, Ki, Kd のどれを変えるべきか）
```

---

## 🔹 目標姿勢の生成（対話式指令）
```
現在ジンバルが安定状態にあります。
次に、IMU情報をもとに「指定目標姿勢」を出力してください。

【現在状態】
- Yaw角度：0.0 deg
- Pitch角度：-1.2 deg

【指示内容】
- 視線が真上方向を向くようにYawとPitchを調整したい
- そのための最適な目標角度を提案してください（数値で）

【出力形式】
- 目標Yaw角度
- 目標Pitch角度
- 理由（設計意図／用途仮定など）
```

---

## 🔹 異常状態からの対話復旧支援
```
ジンバルが error 状態に遷移しました。
以下の条件で、復旧のための対話をChatGPTと開始してください。

【error状態ログ】
- 遷移：move → error（過負荷）
- 時刻：14:23:17
- IMU角速度：+35 deg/s（Yaw）

【支援プロンプト】
- 原因と見られる動作を推定
- 状態を reset に戻す条件を対話式に検討
- 操作者への注意点や今後の予防策を出力
```

---

## 関連ファイル
	•	fsm.yaml：FSM遷移定義（LLMが状態判断に使う）
	•	state_log.md：状態遷移の実ログ
	•	pid_params.md：制御応答と調整方針の参考情報
	•	imu_response_plot.png：LLMが視覚的に判断する補助素材

---

著作：三溝真一（Samizo-AITL）
ライセンス：MIT（教育・研究・PoC再利用を歓迎）
